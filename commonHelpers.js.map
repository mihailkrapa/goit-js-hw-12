{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/img/warning.svg","../src/img/success.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst config = {\n  API_KEY: '26114723-eab203642ec2629c12fb3e14b',\n  BASE_URL: 'https://pixabay.com/api',\n};\n\nexport async function getimages(q, page) {\n  const params = {\n    key: config.API_KEY,\n    page,\n    per_page: 15,\n    q,\n    image_type: 'image',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n\n  const res = await axios.get(`${config.BASE_URL}/`, { params });\n\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nexport const lightbox = new SimpleLightbox('.images-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderMarkup(imageEl, arr) {\n  imageEl.insertAdjacentHTML('beforeend', renderImages(arr));\n  lightbox.refresh();\n}\n\nfunction renderImages(arr) {\n  return arr.map(renderImage).join('');\n}\n\nfunction renderImage({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n  return `\n        <li class=\"images__item\">\n          <a\n            class=\"images__link\"\n            href=\"${largeImageURL}\"\n          >\n            <img\n              class=\"images__image\"\n              src=\"${webformatURL}\"\n              alt=\"${tags}\"\n              \n            />\n          </a>\n         <span class=\"images-info\">\n            <p class=\"text-center\">Likes <span class=\"images-text\">${likes}</span></p>\n            <p class=\"text-center\">Views <span class=\"images-text\">${views}</span></p> \n            <p class=\"text-center\">Comments <span class=\"images-text\">${comments}</span></p>\n            <p class=\"text-center\">Downloads <span class=\"images-text\">${downloads}</span></p>\n         </span>\n        </li>\n      `;\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","export default \"__VITE_ASSET__79ae74dc__\"","export default \"__VITE_ASSET__e8e562d6__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getimages } from './js/pixabay-api';\nimport { renderMarkup } from './js/render-functions';\nimport errorSvg from './img/error.svg';\nimport warningSvg from './img/warning.svg';\nimport successSvg from './img/success.svg';\n\nconst form = document.querySelector('.js-hero-form');\nconst imageList = document.querySelector('.images-list');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.js-load-more-btn');\n\nlet page = 1;\nlet userSearch;\nlet imageHeight;\nconst perPage = 15;\n\nconst loadMoreImages = async () => {\n  showLoader();\n\n  page += 1;\n\n  const data = await getimages(userSearch, page);\n\n  renderMarkup(imageList, data.hits);\n\n  const lastPage = Math.ceil(data.totalHits / perPage);\n\n  if (page === lastPage) {\n    loadBtnHide();\n    showError(\"We're sorry, but you've reached the end of search results.\");\n  }\n\n  hideLoader();\n\n  imagesScroll();\n};\n\nconst handleFormSubmit = async (e) => {\n  e.preventDefault();\n\n  imageList.innerHTML = '';\n\n  page = 1;\n\n  userSearch = e.target.elements.query.value.trim();\n\n  if (userSearch === '') {\n    loadBtnHide();\n    showWarning();\n  }\n\n  showLoader();\n\n  try {\n    const data = await getimages(userSearch, page);\n    if (data.hits.length === 0) {\n      hideLoader();\n      loadBtnHide();\n      showError('Sorry, there are no images matching<br> your search query. Please try again!');\n      e.target.reset();\n    }\n\n    if (data.totalHits < perPage) {\n      loadBtnHide();\n    } else {\n      loadBtnShow();\n    }\n\n    showSuccess(data);\n\n    renderMarkup(imageList, data.hits);\n  } catch (error) {\n    console.error(error);\n  }\n\n  hideLoader();\n\n  e.target.reset();\n}\n\nloadBtn.addEventListener('click', loadMoreImages);\nform.addEventListener('submit', handleFormSubmit);\n\nfunction showWarning() {\n  iziToast.warning({\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#ffa000',\n    iconUrl: warningSvg,\n    message: 'Please enter a search query',\n    position: 'topRight',\n  });\n}\n\nfunction showError(message) {\n  iziToast.error({\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    iconUrl: errorSvg,\n    message: message,\n    position: 'topRight',\n  });\n}\n\nfunction showSuccess(data) {\n  iziToast.success({\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#28a745',\n    message: `We found ${data.totalHits} images.`,\n    iconUrl: successSvg,\n    position: 'topRight',\n  });\n}\n\nfunction showLoader() {\n  loader.classList.add('visible');\n}\n\nfunction hideLoader() {\n  loader.classList.remove('visible');\n}\n\nfunction loadBtnShow() {\n  loadBtn.classList.remove('is-hidden');\n}\n\nfunction loadBtnHide() {\n  loadBtn.classList.add('is-hidden');\n}\n\nfunction imagesScroll() {\n  const slowedImage = document.querySelector('.images__image');\n  imageHeight = slowedImage.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: 2 * imageHeight,\n    behavior: 'smooth',\n  });\n}\n"],"names":["config","getimages","q","page","params","axios","lightbox","SimpleLightbox","renderMarkup","imageEl","arr","renderImages","renderImage","webformatURL","largeImageURL","tags","likes","views","comments","downloads","errorSvg","warningSvg","successSvg","form","imageList","loader","loadBtn","userSearch","imageHeight","perPage","loadMoreImages","showLoader","data","lastPage","loadBtnHide","showError","hideLoader","imagesScroll","handleFormSubmit","showWarning","loadBtnShow","showSuccess","error","iziToast","message"],"mappings":"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"}